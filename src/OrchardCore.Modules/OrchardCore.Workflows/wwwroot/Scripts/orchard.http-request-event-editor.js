/*
** NOTE: This file is generated by Gulp and should not be edited directly!
** Any changes made directly to this file will be overwritten next time its asset group is processed by Gulp.
*/

function initializeHttpRequestEventSecretManager(element) {
  if (!element) {
    return;
  }
  var vueMultiselect = Vue.component('vue-multiselect', window.VueMultiselect["default"]);
  var v = new Vue({
    el: element,
    components: {
      'vue-multiselect': vueMultiselect
    },
    data: function data() {
      var secretData = JSON.parse(element.dataset.secretData);
      var workflowTypeId = $('[data-workflow-type-unique-id]').data('workflow-type-unique-id');
      var activityId = $('[data-activity-id]').data('activity-id');
      var antiforgeryHeaderName = $('[data-antiforgery-header-name]').data('antiforgery-header-name');
      var antiforgeryToken = $('[data-antiforgery-token]').data('antiforgery-token');
      var headers = {};
      headers[antiforgeryHeaderName] = antiforgeryToken;
      return {
        secrets: secretData.secrets,
        selected: secretData.selected,
        workflowTypeId: workflowTypeId,
        activityId: activityId,
        linkUrl: secretData.linkUrl,
        createUrl: secretData.createUrl,
        headers: headers,
        linkSecretErrorMessage: secretData.linkSecretErrorMessage,
        createSecretErrorMessage: secretData.createSecretErrorMessage
      };
    },
    computed: {
      isLinked: function isLinked() {
        return this.selected.name === 'None' || this.selected.activityId === this.activityId && this.selected.workflowTypeId === this.workflowTypeId;
      },
      hasSecret: function hasSecret() {
        return this.selected.name !== 'None';
      }
    },
    methods: {
      create: function create(secretName) {
        var self = this;
        $.ajax({
          url: self.createUrl,
          method: 'POST',
          headers: self.headers,
          data: {
            secretName: secretName,
            workflowTypeId: self.workflowTypeId,
            activityId: self.activityId,
            tokenLifeSpan: $('#token-lifespan').val()
          },
          success: function success(data) {
            self.secrets.push(data);
            self.selected = data;
          },
          error: function error() {
            alert(self.linkSecretErrorMessage);
          }
        });
      },
      linkSecret: function linkSecret() {
        var self = this;
        $.ajax({
          url: self.linkUrl,
          method: 'POST',
          headers: self.headers,
          data: {
            secretName: self.selected.name,
            workflowTypeId: self.workflowTypeId,
            activityId: self.activityId,
            tokenLifeSpan: $('#token-lifespan').val()
          },
          success: function success(data) {
            self.selected.workflowTypeId = data.workflowTypeId;
            self.selected.activityId = data.activityId;
          },
          error: function error() {
            alert(self.linkSecretErrorMessage);
          }
        });
      }
    }
  });
}
///<reference path="../../../Assets/Lib/jquery/typings.d.ts" />
$(function () {
  var generateWorkflowUrl = function generateWorkflowUrl() {
    var workflowTypeId = $('[data-workflow-type-id]').data('workflow-type-id');
    var activityId = $('[data-activity-id]').data('activity-id');
    var tokenLifeSpan = $('#token-lifespan').val();
    var generateUrl = $('[data-generate-url]').data('generate-url') + "?workflowTypeId=".concat(workflowTypeId, "&activityId=").concat(activityId, "&tokenLifeSpan=").concat(tokenLifeSpan);
    var antiforgeryHeaderName = $('[data-antiforgery-header-name]').data('antiforgery-header-name');
    var antiforgeryToken = $('[data-antiforgery-token]').data('antiforgery-token');
    var headers = {};
    headers[antiforgeryHeaderName] = antiforgeryToken;
    $.post({
      url: generateUrl,
      headers: headers
    }).done(function (url) {
      $('#workflow-url-text').val(url);
    });
  };
  $('#generate-url-button').on('click', function (e) {
    generateWorkflowUrl();
  });
  if ($('#workflow-url-text').val() == '') {
    generateWorkflowUrl();
  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHAtcmVxdWVzdC1ldmVudC1zZWNyZXQtbWFuYWdlci5qcyIsIndvcmtmbG93LXVybC1nZW5lcmF0b3IudHMiLCJ3b3JrZmxvdy11cmwtZ2VuZXJhdG9yLmpzIl0sIm5hbWVzIjpbImluaXRpYWxpemVIdHRwUmVxdWVzdEV2ZW50U2VjcmV0TWFuYWdlciIsImVsZW1lbnQiLCJ2dWVNdWx0aXNlbGVjdCIsIlZ1ZSIsImNvbXBvbmVudCIsIndpbmRvdyIsIlZ1ZU11bHRpc2VsZWN0IiwidiIsImVsIiwiY29tcG9uZW50cyIsImRhdGEiLCJzZWNyZXREYXRhIiwiSlNPTiIsInBhcnNlIiwiZGF0YXNldCIsIndvcmtmbG93VHlwZUlkIiwiJCIsImFjdGl2aXR5SWQiLCJhbnRpZm9yZ2VyeUhlYWRlck5hbWUiLCJhbnRpZm9yZ2VyeVRva2VuIiwiaGVhZGVycyIsInNlY3JldHMiLCJzZWxlY3RlZCIsImxpbmtVcmwiLCJjcmVhdGVVcmwiLCJsaW5rU2VjcmV0RXJyb3JNZXNzYWdlIiwiY3JlYXRlU2VjcmV0RXJyb3JNZXNzYWdlIiwiY29tcHV0ZWQiLCJpc0xpbmtlZCIsIm5hbWUiLCJoYXNTZWNyZXQiLCJtZXRob2RzIiwiY3JlYXRlIiwic2VjcmV0TmFtZSIsInNlbGYiLCJhamF4IiwidXJsIiwibWV0aG9kIiwidG9rZW5MaWZlU3BhbiIsInZhbCIsInN1Y2Nlc3MiLCJwdXNoIiwiZXJyb3IiLCJhbGVydCIsImxpbmtTZWNyZXQiLCJnZW5lcmF0ZVdvcmtmbG93VXJsIiwiZ2VuZXJhdGVVcmwiLCJjb25jYXQiLCJwb3N0IiwiZG9uZSIsIm9uIiwiZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDQSxTQUFTQSx1Q0FBdUNBLENBQUNDLE9BQU8sRUFBRTtFQUN0RCxJQUFJLENBQUNBLE9BQU8sRUFBRTtJQUNWO0VBQ0o7RUFFQSxJQUFJQyxjQUFjLEdBQUdDLEdBQUcsQ0FBQ0MsU0FBUyxDQUFDLGlCQUFpQixFQUFFQyxNQUFNLENBQUNDLGNBQWMsV0FBUSxDQUFD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LENBQUMiLCJmaWxlIjoib3JjaGFyZC5odHRwLXJlcXVlc3QtZXZlbnQtZWRpdG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVIdHRwUmVxdWVzdEV2ZW50U2VjcmV0TWFuYWdlcihlbGVtZW50KSB7XHJcbiAgICBpZiAoIWVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHZ1ZU11bHRpc2VsZWN0ID0gVnVlLmNvbXBvbmVudCgndnVlLW11bHRpc2VsZWN0Jywgd2luZG93LlZ1ZU11bHRpc2VsZWN0LmRlZmF1bHQpO1xyXG5cclxuICAgIHZhciB2ID0gbmV3IFZ1ZSh7XHJcbiAgICAgICAgZWw6IGVsZW1lbnQsXHJcbiAgICAgICAgY29tcG9uZW50czogeyAndnVlLW11bHRpc2VsZWN0JzogdnVlTXVsdGlzZWxlY3QgfSxcclxuICAgICAgICBkYXRhOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWNyZXREYXRhID0gSlNPTi5wYXJzZShlbGVtZW50LmRhdGFzZXQuc2VjcmV0RGF0YSk7XHJcbiAgICAgICAgICAgIHZhciB3b3JrZmxvd1R5cGVJZCA9ICQoJ1tkYXRhLXdvcmtmbG93LXR5cGUtdW5pcXVlLWlkXScpLmRhdGEoJ3dvcmtmbG93LXR5cGUtdW5pcXVlLWlkJyk7XHJcbiAgICAgICAgICAgIHZhciBhY3Rpdml0eUlkID0gJCgnW2RhdGEtYWN0aXZpdHktaWRdJykuZGF0YSgnYWN0aXZpdHktaWQnKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhbnRpZm9yZ2VyeUhlYWRlck5hbWUgPSAkKCdbZGF0YS1hbnRpZm9yZ2VyeS1oZWFkZXItbmFtZV0nKS5kYXRhKCdhbnRpZm9yZ2VyeS1oZWFkZXItbmFtZScpO1xyXG4gICAgICAgICAgICB2YXIgYW50aWZvcmdlcnlUb2tlbiA9ICQoJ1tkYXRhLWFudGlmb3JnZXJ5LXRva2VuXScpLmRhdGEoJ2FudGlmb3JnZXJ5LXRva2VuJyk7XHJcbiAgICAgICAgICAgIHZhciBoZWFkZXJzID0ge307XHJcblxyXG4gICAgICAgICAgICBoZWFkZXJzW2FudGlmb3JnZXJ5SGVhZGVyTmFtZV0gPSBhbnRpZm9yZ2VyeVRva2VuO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHNlY3JldHM6IHNlY3JldERhdGEuc2VjcmV0cyxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBzZWNyZXREYXRhLnNlbGVjdGVkLFxyXG4gICAgICAgICAgICAgICAgd29ya2Zsb3dUeXBlSWQ6IHdvcmtmbG93VHlwZUlkLFxyXG4gICAgICAgICAgICAgICAgYWN0aXZpdHlJZDogYWN0aXZpdHlJZCxcclxuICAgICAgICAgICAgICAgIGxpbmtVcmw6IHNlY3JldERhdGEubGlua1VybCxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZVVybDogc2VjcmV0RGF0YS5jcmVhdGVVcmwsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgbGlua1NlY3JldEVycm9yTWVzc2FnZTogc2VjcmV0RGF0YS5saW5rU2VjcmV0RXJyb3JNZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlU2VjcmV0RXJyb3JNZXNzYWdlOiBzZWNyZXREYXRhLmNyZWF0ZVNlY3JldEVycm9yTWVzc2FnZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb21wdXRlZDoge1xyXG4gICAgICAgICAgICBpc0xpbmtlZCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkLm5hbWUgPT09ICdOb25lJyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnNlbGVjdGVkLmFjdGl2aXR5SWQgPT09IHRoaXMuYWN0aXZpdHlJZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkLndvcmtmbG93VHlwZUlkID09PSB0aGlzLndvcmtmbG93VHlwZUlkKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaGFzU2VjcmV0KCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWQubmFtZSAhPT0gJ05vbmUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgICAgIGNyZWF0ZShzZWNyZXROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogc2VsZi5jcmVhdGVVcmwsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogc2VsZi5oZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjcmV0TmFtZTogc2VjcmV0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29ya2Zsb3dUeXBlSWQ6IHNlbGYud29ya2Zsb3dUeXBlSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5SWQ6IHNlbGYuYWN0aXZpdHlJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5MaWZlU3BhbjogJCgnI3Rva2VuLWxpZmVzcGFuJykudmFsKClcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VjcmV0cy5wdXNoKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KHNlbGYubGlua1NlY3JldEVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxpbmtTZWNyZXQoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogc2VsZi5saW5rVXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHNlbGYuaGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3JldE5hbWU6IHNlbGYuc2VsZWN0ZWQubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29ya2Zsb3dUeXBlSWQ6IHNlbGYud29ya2Zsb3dUeXBlSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5SWQ6IHNlbGYuYWN0aXZpdHlJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5MaWZlU3BhbjogJCgnI3Rva2VuLWxpZmVzcGFuJykudmFsKClcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWQud29ya2Zsb3dUeXBlSWQgPSBkYXRhLndvcmtmbG93VHlwZUlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkLmFjdGl2aXR5SWQgPSBkYXRhLmFjdGl2aXR5SWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChzZWxmLmxpbmtTZWNyZXRFcnJvck1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vQXNzZXRzL0xpYi9qcXVlcnkvdHlwaW5ncy5kLnRzXCIgLz5cclxuXHJcbiQoKCkgPT4ge1xyXG4gICAgY29uc3QgZ2VuZXJhdGVXb3JrZmxvd1VybCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zdCB3b3JrZmxvd1R5cGVJZDogc3RyaW5nID0gJCgnW2RhdGEtd29ya2Zsb3ctdHlwZS1pZF0nKS5kYXRhKCd3b3JrZmxvdy10eXBlLWlkJyk7XHJcbiAgICAgICAgY29uc3QgYWN0aXZpdHlJZDogc3RyaW5nID0gJCgnW2RhdGEtYWN0aXZpdHktaWRdJykuZGF0YSgnYWN0aXZpdHktaWQnKTtcclxuICAgICAgICB2YXIgdG9rZW5MaWZlU3BhbiA9ICQoJyN0b2tlbi1saWZlc3BhbicpLnZhbCgpO1xyXG4gICAgICAgIGNvbnN0IGdlbmVyYXRlVXJsOiBzdHJpbmcgPSAkKCdbZGF0YS1nZW5lcmF0ZS11cmxdJykuZGF0YSgnZ2VuZXJhdGUtdXJsJykgKyBgP3dvcmtmbG93VHlwZUlkPSR7d29ya2Zsb3dUeXBlSWR9JmFjdGl2aXR5SWQ9JHthY3Rpdml0eUlkfSZ0b2tlbkxpZmVTcGFuPSR7dG9rZW5MaWZlU3Bhbn1gO1xyXG4gICAgICAgIGNvbnN0IGFudGlmb3JnZXJ5SGVhZGVyTmFtZTogc3RyaW5nID0gJCgnW2RhdGEtYW50aWZvcmdlcnktaGVhZGVyLW5hbWVdJykuZGF0YSgnYW50aWZvcmdlcnktaGVhZGVyLW5hbWUnKTtcclxuICAgICAgICBjb25zdCBhbnRpZm9yZ2VyeVRva2VuOiBzdHJpbmcgPSAkKCdbZGF0YS1hbnRpZm9yZ2VyeS10b2tlbl0nKS5kYXRhKCdhbnRpZm9yZ2VyeS10b2tlbicpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlcnM6IGFueSA9IHt9O1xyXG5cclxuICAgICAgICBoZWFkZXJzW2FudGlmb3JnZXJ5SGVhZGVyTmFtZV0gPSBhbnRpZm9yZ2VyeVRva2VuO1xyXG5cclxuICAgICAgICAkLnBvc3Qoe1xyXG4gICAgICAgICAgICB1cmw6IGdlbmVyYXRlVXJsLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzXHJcbiAgICAgICAgfSkuZG9uZSh1cmwgPT4ge1xyXG4gICAgICAgICAgICAkKCcjd29ya2Zsb3ctdXJsLXRleHQnKS52YWwodXJsKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgJCgnI2dlbmVyYXRlLXVybC1idXR0b24nKS5vbignY2xpY2snLCBlID0+IHtcclxuICAgICAgICBnZW5lcmF0ZVdvcmtmbG93VXJsKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoJCgnI3dvcmtmbG93LXVybC10ZXh0JykudmFsKCkgPT0gJycpIHtcclxuICAgICAgICBnZW5lcmF0ZVdvcmtmbG93VXJsKCk7XHJcbiAgICB9XHJcbn0pO1xyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi9Bc3NldHMvTGliL2pxdWVyeS90eXBpbmdzLmQudHNcIiAvPlxuJChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGdlbmVyYXRlV29ya2Zsb3dVcmwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3b3JrZmxvd1R5cGVJZCA9ICQoJ1tkYXRhLXdvcmtmbG93LXR5cGUtaWRdJykuZGF0YSgnd29ya2Zsb3ctdHlwZS1pZCcpO1xuICAgICAgICB2YXIgYWN0aXZpdHlJZCA9ICQoJ1tkYXRhLWFjdGl2aXR5LWlkXScpLmRhdGEoJ2FjdGl2aXR5LWlkJyk7XG4gICAgICAgIHZhciB0b2tlbkxpZmVTcGFuID0gJCgnI3Rva2VuLWxpZmVzcGFuJykudmFsKCk7XG4gICAgICAgIHZhciBnZW5lcmF0ZVVybCA9ICQoJ1tkYXRhLWdlbmVyYXRlLXVybF0nKS5kYXRhKCdnZW5lcmF0ZS11cmwnKSArIFwiP3dvcmtmbG93VHlwZUlkPVwiLmNvbmNhdCh3b3JrZmxvd1R5cGVJZCwgXCImYWN0aXZpdHlJZD1cIikuY29uY2F0KGFjdGl2aXR5SWQsIFwiJnRva2VuTGlmZVNwYW49XCIpLmNvbmNhdCh0b2tlbkxpZmVTcGFuKTtcbiAgICAgICAgdmFyIGFudGlmb3JnZXJ5SGVhZGVyTmFtZSA9ICQoJ1tkYXRhLWFudGlmb3JnZXJ5LWhlYWRlci1uYW1lXScpLmRhdGEoJ2FudGlmb3JnZXJ5LWhlYWRlci1uYW1lJyk7XG4gICAgICAgIHZhciBhbnRpZm9yZ2VyeVRva2VuID0gJCgnW2RhdGEtYW50aWZvcmdlcnktdG9rZW5dJykuZGF0YSgnYW50aWZvcmdlcnktdG9rZW4nKTtcbiAgICAgICAgdmFyIGhlYWRlcnMgPSB7fTtcbiAgICAgICAgaGVhZGVyc1thbnRpZm9yZ2VyeUhlYWRlck5hbWVdID0gYW50aWZvcmdlcnlUb2tlbjtcbiAgICAgICAgJC5wb3N0KHtcbiAgICAgICAgICAgIHVybDogZ2VuZXJhdGVVcmwsXG4gICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzXG4gICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKHVybCkge1xuICAgICAgICAgICAgJCgnI3dvcmtmbG93LXVybC10ZXh0JykudmFsKHVybCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgJCgnI2dlbmVyYXRlLXVybC1idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBnZW5lcmF0ZVdvcmtmbG93VXJsKCk7XG4gICAgfSk7XG4gICAgaWYgKCQoJyN3b3JrZmxvdy11cmwtdGV4dCcpLnZhbCgpID09ICcnKSB7XG4gICAgICAgIGdlbmVyYXRlV29ya2Zsb3dVcmwoKTtcbiAgICB9XG59KTtcbiJdfQ==
